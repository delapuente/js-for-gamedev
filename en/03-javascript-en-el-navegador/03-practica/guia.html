
<!DOCTYPE HTML>
<html lang="es" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Guía · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Escribe para buscar" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../01-intro/">
            
                <a href="../../01-intro/">
            
                    
                    El entorno de trabajo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    JavaScript básico
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../02-javascript/0201-poo/">
            
                <a href="../../02-javascript/0201-poo/">
            
                    
                    Programación orientada a objetos
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../02-javascript/0202-modelo-de-datos/">
            
                <a href="../../02-javascript/0202-modelo-de-datos/">
            
                    
                    El modelo de datos de JavaScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../../02-javascript/0203-modelo-de-ejecucion/">
            
                <a href="../../02-javascript/0203-modelo-de-ejecucion/">
            
                    
                    El modelo de ejecución de JavaScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../../02-javascript/02-ejercicios/">
            
                <a href="../../02-javascript/02-ejercicios/">
            
                    
                    Ejercicios guiados
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../../02-javascript/02-practica/">
            
                <a href="../../02-javascript/02-practica/">
            
                    
                    Práctica
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../../02-javascript/02-practica/GUIDE.html">
            
                <a href="../../02-javascript/02-practica/GUIDE.html">
            
                    
                    Guía
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.2" data-path="../../02-javascript/02-practica/TDD.html">
            
                <a href="../../02-javascript/02-practica/TDD.html">
            
                    
                    TDD
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    JavaScript en el navegador
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../0301-dom/">
            
                <a href="../0301-dom/">
            
                    
                    Navegador y DOM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../0302-canvas/">
            
                <a href="../0302-canvas/">
            
                    
                    Canvas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../03-ejercicios/index.md">
            
                <span>
            
                    
                    Ejercicios guiados
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="./">
            
                <a href="./">
            
                    
                    Práctica
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.4.4.1" data-path="guia.html">
            
                <a href="guia.html">
            
                    
                    Guía
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Publicado con GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Guía</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="gu&#xED;a">Gu&#xED;a</h1>
<p><em>Nota: lee primero el <a href="./">enunciado de la pr&#xE1;ctica</a> antes de leer este documento.</em></p>
<p>Esta es una gu&#xED;a paso a paso con sugerencias para afrontar la pr&#xE1;ctica. Es recomendable <strong>leer este documento entero</strong> &#x2013;especialmente el apartado de <em>Consideraciones</em>&#x2013; antes de ponerse a realizar el primer paso.</p>
<p>Tambi&#xE9;n es recomendable tener fresca en la cabeza la API de la pr&#xE1;ctica anterior de las batallas RPG con Node: repasa el enunciado de la pr&#xE1;ctica o su c&#xF3;digo fuente.</p>
<p>Durante el desarrollo de esta pr&#xE1;ctica, si te atascas sobre qu&#xE9; llamadas a la API hay que hacer, siempre puedes consultar el archivo <code>index.js</code> de la pr&#xE1;ctica anterior &#x2013;donde hay programado un cliente de dicha API.</p>
<h2 id="1-mostrar-los-personajes">1. Mostrar los personajes</h2>
<p>En el c&#xF3;digo HTML de base, hay dos listas <code>&lt;ul class=&quot;character-list&quot;&gt;</code> que hay que rellenar con elementos <code>&lt;li&gt;</code>, uno por personaje. Debemos indicar el nombre del personaje junto con sus atributos de vida y man&#xE1;. M&#xE1;s adelante nos ser&#xE1; util poder referinos a ese personaje, as&#xED; que es conveniente almacenar en un atributo data su ID de personaje.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;character-list&quot;</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ... --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">data-chara-id</span>=<span class="hljs-string">&quot;bat 2&quot;</span>&gt;</span>
        bat (HP: <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>/5, MP: <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>/0)
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
<p>Aunque las listas <code>&lt;ul&gt;</code> est&#xE1;n creadas en el archivo HTML, falta rellenar su contenido, lo cual se ha de hacer din&#xE1;micamente con JavaScript. Con <code>Battle.prototype.characters.allFrom</code> se puede acceder a las vistas (<code>CharactersView</code>) de los personajes de una party.</p>
<p>Como habr&#xE1; que refrescar el contenido de estas listas, es recomendable implementar una funci&#xF3;n que haga esto, para poder llamarla m&#xE1;s adelante desde otros sitios.</p>
<p>Por ahora, se puede comenzar con mostrar los personajes al inicio de cada turno. Para ello, hay que subscribirse al evento <code>turn</code> de <code>Battle</code>.</p>
<p><img src="images/parties.png" alt="Listado de las parties"></p>
<h3 id="documentaci&#xF3;n-relacionada">Documentaci&#xF3;n relacionada</h3>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML" target="_blank"><code>Element.innerHTML</code></a> en la MDN.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector" target="_blank"><code>Document.querySelector</code></a> en la MDN</li>
</ul>
<h2 id="2-mostrar-el-personaje-seleccionado">2. Mostrar el personaje seleccionado</h2>
<p>El CSS est&#xE1; preparado para que un elemento con la clase <code>active</code> aparezca resaltado, indicando que es el turno de dicho personaje.</p>
<p>En el callback evento <code>turn</code> de <code>Battle</code> se nos pasa la informaci&#xF3;n de cada turno. Uno de los datos del evento es la ID del personaje activo, con lo que podemos usar un <code>querySelector</code> para seleccionar el <code>&lt;li&gt;</code> de dicho personaje y a&#xF1;adir la clase <code>active</code>.</p>
<p><img src="images/highlight_current_chara.png" alt="Selecci&#xF3;n del personaje actual"></p>
<h3 id="documentaci&#xF3;n-relacionada">Documentaci&#xF3;n relacionada</h3>
<ul>
<li><a href="https://developer.mozilla.org/en/docs/Web/API/Element/classList" target="_blank"><code>Element.classList</code></a> en la MDN</li>
<li><a href="https://developer.mozilla.org/en/docs/Web/Guide/HTML/Using_data_attributes" target="_blank">Using data attributes</a> (gu&#xED;a en la MDN)</li>
</ul>
<h2 id="3-mostrar-el-men&#xFA;-de-acciones-de-batalla">3. Mostrar el men&#xFA; de acciones de batalla</h2>
<p>Dentro de la secci&#xF3;n <code>&lt;section class=&quot;battle-menu&quot;&gt;</code> hay tres formularios, que aparecen ocultos gracias a un estilo <code>display: none</code> aplicado <em>inline</em>. Cada formulario representa una &quot;fase&quot; del men&#xFA; de batalla, y presentar&#xE1; una lista de opciones al jugador.</p>
<p>Se puede obtener una lista de las opciones disponibles en un momento dado con el m&#xE9;todo <code>list</code> de <code>Battle.prototype.options</code>. Con dicha lista, se pueden generar una serie de <em>radio buttons</em> para que el jugador pueda elegir la opci&#xF3;n deseada.</p>
<p>Esta lista de <em>radio buttons</em> tendr&#xE1; el siguiente aspecto &#x2013;pero se ha de generar din&#xE1;micamente con JavaScript:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;choices&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;option&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;attack&quot;</span>&gt;</span> attack<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;option&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;defend&quot;</span>&gt;</span> defend<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;option&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;cast&quot;</span>&gt;</span> cast<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
<p>Hemos de generar esta lista din&#xE1;micamente dentro de las acciones a tomar cuando se dispare el evento <code>turn</code> de <code>Battle</code>. En este caso, la lista a generar es de <strong>las acciones</strong> que puede tomar un personaje, lo que se corresponde con el formulario con su atributo <code>name</code> a <code>select-action</code>.</p>
<p><img src="images/actions_menu.png" alt="Men&#xFA; de acciones"></p>
<h2 id="4-seleccionar-una-acci&#xF3;n">4. Seleccionar una acci&#xF3;n</h2>
<p>Los <em>radio buttons</em> tienen un funcionamiento peculiar, puesto que comparten el atributo <code>name</code>. Esta es la manera que tiene el navegador de &quot;agruparlos&quot;, de forma que s&#xF3;lo pueda estar activo un &#xFA;nico <em>radio button</em> en un momento dado.</p>
<p>Se puede acceder f&#xE1;cilmente al valor (<em>value</em>) de un <strong>grupo de <em>radio buttons</em></strong> a trav&#xE9;s del formulario al que pertenecen. Por ejemplo, para el men&#xFA; de batalla hemos establecido un <code>name</code> para el grupo de <code>&quot;option&quot;</code>. Suponiendo que su formulario est&#xE1; almacenado en la variable <code>form</code>, podr&#xED;amos tener:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> action = form.elements[<span class="hljs-string">&apos;option&apos;</span>].value;
battle.options.select(action);
</code></pre>
<p>Obviamente hay que realizar esto cuando el jugador haya pulsado el bot&#xF3;n de <em>Select action</em>. Para ello, hay que subscribirse al evento <code>submit</code> del formulario. Es imprescindible que adem&#xE1;s anulemos dicho evento con <code>preventDefault</code> para evitar que el navegador recargue la p&#xE1;gina.</p>
<p>Debemos adem&#xE1;s <strong>validar</strong> el formulario, para asegurarnos de que el jugador <em>ha seleccionado</em> una opci&#xF3;n. HTML5 nos permite hacer validaciones sencillas con JavaScript en el lado del cliente. Para requerir un campo, debemos a&#xF1;adir el atributo <code>required</code> a dicho elemento. En el caso de un grupo de <em>radio buttons</em>, basta con a&#xF1;adir <code>required</code> a uno cualquiera:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;option&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;attack&quot;</span> <span class="hljs-attr">required</span>&gt;</span>
</code></pre>
<p>Para comprobar que este paso est&#xE1; hecho correctamente, puedes subscribirte al evento <code>info</code> de <code>Battle</code> e imprimir los datos de dicho evento. Con lo que hay hecho ahora deber&#xED;a funcionar la acci&#xF3;n de <em>Defend</em>, puesto que no requiere ning&#xFA;n paso m&#xE1;s.</p>
<p><img src="images/defend_info.png" alt="Log de la acci&#xF3;n de defender"></p>
<h3 id="documentaci&#xF3;n-relacionada">Documentaci&#xF3;n relacionada</h3>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms" target="_blank">HTML Forms Guide</a>, una lista de art&#xED;culos y tutoriales sobre formularios HTML5.</li>
<li><a href="https://developer.mozilla.org/en/docs/Web/API/Event/preventDefault" target="_blank"><code>Event.preventDefault</code></a>  en la MDN</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormControlsCollection" target="_blank"><code>HTMLFormControlsCollection</code></a> en la MDN (para informaci&#xF3;n sobre <code>HTMLFormElement.elements</code>)</li>
</ul>
<h2 id="5-seleccionar-un-objetivo">5. Seleccionar un objetivo</h2>
<p>Se hace de forma similar a seleccionar una acci&#xF3;n: se ha de generar la lista  de opciones din&#xE1;micamente con JavaScript, as&#xED; como interceptar el evento <code>submit</code> de este formulario y llamar a <code>battle.options.select</code> con el objetivo seleccionado por el jugador.</p>
<p>Un a&#xF1;adido que tiene este formulario es un enlace que nos permite <strong>cancelar la acci&#xF3;n actual</strong>. Para que funcione, hemos de interceptar el evento <code>click</code> de dicho enlace, usar <code>preventDefault</code> para que el navegador no haga nada, y llamar a <code>battle.options.cancel</code>.</p>
<p>Por supuesto, hay que controlar qu&#xE9; men&#xFA; est&#xE1; visible cada momento. Esto lo podemos hacer cambiando su estilo CSS inline, a trav&#xE9;s de la propiedad <code>display</code>:</p>
<pre><code class="lang-javascript">actionForm.style.display = <span class="hljs-string">&apos;none&apos;</span>; <span class="hljs-comment">// oculta el formulario de acciones</span>
</code></pre>
<pre><code class="lang-javascript">targetForm.style.display = <span class="hljs-string">&apos;block&apos;</span>; <span class="hljs-comment">// muestra el formulario de objetivos</span>
</code></pre>
<p>Para comprobar que funciona, prueba a elegir atacar un objetivo en los men&#xFA;s y comprueba el mensaje que emite el evento <code>info</code> de <code>Battle</code> en la consola:</p>
<p><img src="images/attack_info.png" alt="Log de atacar"></p>
<p>Como re-renderizamos los personajes de las <em>parties</em> en cada turno (cada vez que <code>Battle</code> emite <code>turn</code>), si el ataque ha tenido &#xE9;xito, deber&#xED;amos ver c&#xF3;mo han disminuido sus puntos de vida.</p>
<h3 id="documentaci&#xF3;n-relacionada">Documentaci&#xF3;n relacionada</h3>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/display" target="_blank">Propiedad CSS <code>display</code></a> en la MDN</li>
</ul>
<h2 id="6-seleccionar-un-hechizo">6. Seleccionar un hechizo</h2>
<p>Esto es muy similar a seleccionar una acci&#xF3;n o un objetivo. Hay que generar, de nuevo, la lista de opciones (en este caso, hechizos disponibles) din&#xE1;micamente, y ocultar / ense&#xF1;ar el men&#xFA; que corresponda seg&#xFA;n el flujo.</p>
<p>Seleccionar un hechizo ocurre tras haber seleccionado la opci&#xF3;n <em>Cast</em> en el men&#xFA; de acciones, y una vez seleccinado el hechizo debemos mostrar el formulario de seleccionar un objetivo.</p>
<p>La particularidad de este men&#xFA; es que <strong>puede ser que no haya ninguna opci&#xF3;n disponible</strong>. En este caso, debemos desactivar el bot&#xF3;n del formulario si la lista de opciones est&#xE1; vac&#xED;a (y activarlo en caso contrario). Para ello, hay que usar la propiedad <code>disabled</code> del bot&#xF3;n.</p>
<p><img src="images/disabled_spells.png" alt="Bot&#xF3;n desactivado"></p>
<h2 id="7-panel-de-informaci&#xF3;n">7. Panel de informaci&#xF3;n</h2>
<p>Hay que mostrar informaci&#xF3;n al usuario sobre el resultado de una acci&#xF3;n concreta: si el ataque tuvo &#xE9;xito o no, cuanto da&#xF1;o caus&#xF3;, etc.</p>
<p><img src="images/info_panel.png" alt="Panel de informaci&#xF3;n de batalla"></p>
<p>En el archivo HTML hay un p&#xE1;rrafo con ID <code>battle-info</code>, cuyo contenido puedes modificar para mostrar estos mensajes de informaci&#xF3;n de batalla.</p>
<p>Esta informaci&#xF3;n de batalla la podemos obtener subscribi&#xE9;ndonos al evento <code>info</code> de <code>Battle</code>, que nos proporcionar&#xE1; los datos de qu&#xE9; personaje actu&#xF3;, contra qui&#xE9;n, si tuvo &#xE9;xito, etc.</p>
<p>Para facilitar la tarea, se ha incluido una funci&#xF3;n llamada <code>prettifyEffect</code>, que devuelve una string &quot;bonita&quot; (en lugar de <code>[Object object]</code>) con los efectos aplicados en el ataque.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> effectsTxt = prettifyEffect(effect || {});
<span class="hljs-comment">// ej: -&gt; &apos;-5 hp, +5 mp&apos;</span>
</code></pre>
<h2 id="8-marcar-personajes-como-muertos">8. Marcar personajes como muertos</h2>
<p>Ahora que los personajes pueden atacar, podemos mostrar cu&#xE1;ndo uno ha muerto. La hoja de estilos CSS incluye una clase <code>dead</code> que, aplicada a un elemento, lo muestra como &quot;muerto&quot; (en este caso, tachado).</p>
<p><img src="images/death.png" alt="Personaje marcado como muerto"></p>
<p>Para ello, se ha de modificar el c&#xF3;digo que se ha programado en el paso 1 para mostrar los personajes, de forma que cada elemento de la lista (<code>&lt;li&gt;</code>) tenga la clase <code>dead</code> si el personaje est&#xE1; muerto (los puntos de vida est&#xE1;n a cero).</p>
<h2 id="9-final-del-juego">9. Final del juego</h2>
<p>Hay que mostrar un mensaje en el panel de informaci&#xF3;n que indique que el juego ha acabado y qui&#xE9;n ha ganado. Adem&#xE1;s, hay que volver a mostrar los personajes para que se muestre el resultado final de la batalla (con una de las <em>parties</em> con todos los personajes muertos).</p>
<p>El juego se acaba cuando <code>Battle</code> emite el evento <code>end</code>, por lo que debemos implementar dicho c&#xF3;digo en un callback de este evento.</p>
<p><img src="images/end_game.png" alt="Mensaje de final del juego"></p>
<hr>
<h2 id="consideraciones">Consideraciones</h2>
<h3 id="template-strings">Template strings</h3>
<p>Las <em>template strings</em> (o <em>template literals</em>) son una caracter&#xED;stica de ES6, pero que <a href="http://kangax.github.io/compat-table/es6/" target="_blank">ya est&#xE1; implementada</a> en la mayor&#xED;a de navegadores modernos.
Pueden resultarte &#xFA;tiles en esta pr&#xE1;ctica, ya que soportan <strong>interpolaci&#xF3;n de expresiones</strong> y declaraciones <strong>multilinea</strong>.</p>
<p>En su manera m&#xE1;s b&#xE1;sica, se definen igual que una string normal, pero usando backticks <code>`:</code></p>
<pre><code class="lang-javascript"><span class="hljs-string">`Hello, world!`</span>
</code></pre>
<p>Se pueden tener strings multil&#xED;neas sin necesidad de romper la cadena ni usar el operador de concatenaci&#xF3;n:</p>
<pre><code class="lang-javascript"><span class="hljs-string">`Hello,
world!`</span>
</code></pre>
<p>Para interpolar expresiones, debemos poner la expresi&#xF3;n a interpolar entre los caracteres <code>${}</code>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> name = <span class="hljs-string">&apos;Darth Vader&apos;</span>;
<span class="hljs-string">`Hello, <span class="hljs-subst">${name}</span>`</span>;
</code></pre>
<p>No s&#xF3;lo podemos utilizar variables, sino otro tipo de expresiones:</p>
<pre><code class="lang-javascript"><span class="hljs-string">`Hello, <span class="hljs-subst">${name.toUpperCase()}</span>, here&apos;s a calculation: <span class="hljs-subst">${2 + 2}</span>`</span>
</code></pre>
<p>Recordemos tambi&#xE9;n que el operador ternario es tambi&#xE9;n una expresi&#xF3;n, y nos permite interpolar condiciones sencillas:</p>
<pre><code class="lang-javascript"><span class="hljs-string">`Hello, you are <span class="hljs-subst">${life &gt; 0 ? &apos;alive&apos; : &apos;dead&apos;}</span>`</span>;
</code></pre>
<p>Un ejemplo pr&#xE1;ctico que muestra la diferencia entre usar template strings y strings normales para generar c&#xF3;digo HTML a usar dentro de la propiedad <code>innerHTML</code>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> list = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;ul.shopping-list&apos;</span>);
<span class="hljs-keyword">var</span> data = {name: <span class="hljs-string">&apos;Banana&apos;</span>, amount: <span class="hljs-number">3</span>, price: <span class="hljs-number">0.5</span>};

<span class="hljs-comment">// template strings</span>
list.innerHTML += <span class="hljs-string">`&lt;li class=&quot;<span class="hljs-subst">${data.amount &gt; 0 ? &apos;bought&apos; : &apos;&apos;}</span>&quot;&gt;
    <span class="hljs-subst">${data.name}</span>, <span class="hljs-subst">${data.amount * data.price}</span>&#x20AC;
    &lt;/li&gt;`</span>;

<span class="hljs-comment">// regular strings</span>
list.innerHTML += <span class="hljs-string">&apos;&lt;li class=&quot;&apos;</span> + (data.amount &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">&apos;bought&apos;</span> : <span class="hljs-string">&apos;&apos;</span>) + <span class="hljs-string">&apos;&quot;&gt;&apos;</span> +
    data.name + <span class="hljs-string">&apos;, &apos;</span> + data.amount * data.price + <span class="hljs-string">&apos;&#x20AC;&apos;</span> +
    <span class="hljs-string">&apos;&lt;/li&gt;&apos;</span>;
</code></pre>
<p><strong>Documentaci&#xF3;n</strong>: <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals" target="_blank"><em>Template strings</em></a> en la MDN.</p>
<h3 id="atributos-data">Atributos data</h3>
<p>Las ID&apos;s de los personajes repetidos tienen un espacio en blanco (p.ej: <code>bat 2</code>). Para poder usar esto en un <code>querySelector</code>, se deben utilizar comillas:</p>
<pre><code class="lang-javascript"><span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;[data-chara-id=&quot;bat 2&quot;]&apos;</span>);
</code></pre>
<p>Para acceder a ese atributo data usando la propiedad <code>dataset</code> hay que tener en cuenta que los guiones se transforman en <a href="https://en.wikipedia.org/wiki/Camel_case#Computer_programming" target="_blank">camel case</a>. As&#xED;, si se usa como atributo data <code>data-chara-id</code>, se acceder&#xED;a a &#xE9;l de la siguiente manera:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> el = <span class="hljs-built_in">document</span>.querySelector([data-chara-id=<span class="hljs-string">&quot;bat 2&quot;</span>]);
<span class="hljs-built_in">console</span>.log(el.dataset.charaId); <span class="hljs-comment">// imprimir&#xED;a bat 2</span>
</code></pre>
<p><strong>Documentaci&#xF3;n</strong>: <a href="https://developer.mozilla.org/en/docs/Web/Guide/HTML/Using_data_attributes" target="_blank">Using data attributes</a> en la MDN.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Práctica">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Guía","level":"1.4.4.1","depth":3,"previous":{"title":"Práctica","level":"1.4.4","depth":2,"path":"03-javascript-en-el-navegador/03-practica/index.md","ref":"03-javascript-en-el-navegador/03-practica/index.md","articles":[{"title":"Guía","level":"1.4.4.1","depth":3,"path":"03-javascript-en-el-navegador/03-practica/guia.md","ref":"03-javascript-en-el-navegador/03-practica/guia.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"es","gitbook":"*"},"file":{"path":"03-javascript-en-el-navegador/03-practica/guia.md","mtime":"2016-11-22T10:00:12.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-08-22T18:35:47.095Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

